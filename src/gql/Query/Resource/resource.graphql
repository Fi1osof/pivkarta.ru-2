query resources(
  $where: bani684_site_contentWhereInput
  $orderBy: [bani684_site_contentOrderByInput!]
  $take: Int
  $skip: Int
  $withContent: Boolean = false
  $withCreatedBy: Boolean = false # $withComments: Boolean = false
) {
  resources(where: $where, orderBy: $orderBy, take: $take, skip: $skip) {
    ... on Resource {
      ...resource
    }

    ... on Company {
      ...CompanyFields
    }

    ... on City {
      ...city
    }
  }

  resourcesCount(where: $where)
}

fragment resource on ResourceInterface {
  ...resourceNoNesting
  CreatedBy @include(if: $withCreatedBy) {
    ...user_
  }
  # TODO https://github.com/dotansimha/graphql-code-generator/pull/5598
  # Comments @include(if: $withComments) {
  Comments {
    ...comment
  }
}

fragment resourceNoNesting on ResourceInterface {
  id
  pagetitle
  uri
  createdon
  template
  content @include(if: $withContent)
}
